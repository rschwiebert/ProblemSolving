#!/usr/bin/python
# https://projecteuler.net/problem=8

# Find the largest possible product of 13 consecutive digits in this number.

# Notes:

# This is an optimized version of the naive approach of just looking at 
# every window of 13 consecutive characters.


text = ('73167176531330624919225119674426574742355349194934'
'96983520312774506326239578318016984801869478851843'
'85861560789112949495459501737958331952853208805511'
'12540698747158523863050715693290963295227443043557'
'66896648950445244523161731856403098711121722383113'
'62229893423380308135336276614282806444486645238749'
'30358907296290491560440772390713810515859307960866'
'70172427121883998797908792274921901699720888093776'
'65727333001053367881220235421809751254540594752243'
'52584907711670556013604839586446706324415722155397'
'53697817977846174064955149290862569321978468622482'
'83972241375657056057490261407972968652414535100474'
'82166370484403199890008895243450658541227588666881'
'16427171479924442928230863465674813919123162824586'
'17866458359124566529476545682848912883142607690042'
'24219022671055626321111109370544217506941658960408'
'07198403850962455444362981230987879927244284909188'
'84580156166097919133875499200524063689912560717606'
'05886116467109405077541002256983155200055935729725'
'716362695618826704282524836008232575304207529634507316717')


if __name__ == "__main__":
    cur = 0
    maximum = 0
    while cur + 12 < 1000:
        # if the window has a 0, advance beyond it and try again
        if '0' in text[cur:cur+13]:
            cur += text[cur:cur+13].rindex('0') + 1
            continue
        # OK, it's worth computing the window's product
        val = 1
        for num in map(int, text[cur:cur+13]):
            val *= num
        maximum = max(val, maximum)
        # do right shifts until you hit a 0 or the end
        while cur + 13 < 1000:
            if text[cur+13] == '0':
                # we know how far we need to jump here
                cur += 13
                break
            val /= int(text[cur])
            val *= int(text[cur+13])
            maximum = max(val, maximum)
            cur += 1
    print('The answer is: {}'.format(maximum))




